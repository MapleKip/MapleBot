const Discord = require('discord.js'); 
const client = new Discord.Client();
exports.client = client;      
const config = require("./config.json");
const { get } = require("snekfetch");   
var snekfetch = require("snekfetch")
const math = require("mathjs")
const ud = require('urban-dictionary')
var coin = ['https://cdn.discordapp.com/attachments/531674093616103436/535116714959175689/maplecoin3.png','https://cdn.discordapp.com/attachments/531674093616103436/534919091497074700/maplecoin2.png']
var shrigney = 'it was a cold and rainy Saturday. Rigney had just came home for work. he sat down on the couch. his roommate Schroeder walked in. sup nerd. he said. i got focused at work today. Rigney replied. R.I.P Schroeder replied. He sat down with him on the couch with Rigney. they both stared at the T.V for a minute. until Rigney said this is boring. lets watch some Netflix. Schroeder had got a deep feeling in his stomach, like something wasn\'t right. but he just pushed it away and watched Netflix. after 30 minutes of Rigney\'s weebism, he turned and said, \"want to reenact a hentai?\" unsurprisingly, Schroeder wasn\'t into that, so he said, what? hell no! Rigney stood up from the couch and stood in front of Schroeder. he said, "that\'s not what i wanted to hear..." " Rigney pounced onto Schroeder. cries of "What the hell?!?" and "fucking stop!" followed. but nothing would stop the mad man. Rigney got up. and Schroeder felt free. but only for a moment. until he realized he was hand cuffed. Rigney grabbed him by these and slammed him on a wooden chair.  he pulled out his finest rope and tied him to the chair. all the while, Schroeder was speechless. Rigney went for a cabinet in the kitchen. Schroeder almost instantly realized that, he has never opened it, and whatever was inside, was going to be used on him... after 30 seconds of rattling and searching in the cabinet, Rigney found what he wanted... a key. he walked over to the basement door, and unlocked it. he opened the door, then headed for Schroeder. he dragged him all the way down, through the fighting, through the squirming. Rigney was a determined man he turned on the light... Schroeder had hoped for better. he had hoped for just the basics. but no... what he saw before him was truly terrifying. it was Rigney\'s porn stash. all 50 terabytes of it. and he had a projector hooked up to his pc. Schroeder sensed the horror that was about to before him. Rigney stared Schroeder strait in the eye. "do you want to reenact a hentai?". as Schroeder tried to escape, Rigney loaded a video. in the time it took, Schroeder noticed, that the rope isn\'t as top notch as he had been led to believe. it could easily be broken with enough time and endurance. but Schroeder didn\'t have either. the video started, and the torture began. he was forced to watch hentai. great. it wasn\'t so bad. but it was leading to something much worse. it was an hour long. (It was just a normal episode of some anime) so he had SOME time. but he was being watched the entire time. so, he had come up with a plan. "he had to go upstairs at some point. there is nothing down here for... that kind of stuff..." so there was an opportunity to get out. but the window would be short. and he might only get one, he doesn\'t know how "exotic" the hentai gets. after an hour of not paying attention. the credits roll, and Rigney turns it off. and he says "you got all of that?" And after not paying attention, he ponders what consequences will come of it. to his surprise, Rigney states, "its ok, ILL REMIND YOU. >:)" Fak. and here was Schroeder\'s biggest hope, "i need to grab some TOOLS" and he walks upstairs. this was Schroeder\'s queue to go spastic. he started putting pressure on the rope and it started breaking. "one strand broken" one to go. he could heard footsteps returning. he went light speed to break the last strand. \"IT BROKE" and he felt a false sense of freedom. then realized... he\'s still handcuffed. dumbass. and then heard hard, fast footsteps come closer. RIGNEY KNEW... He had acted on instinct. he hid under the stairs. which was mostly filled with "posters". he saw Rigney feet from under the stairs. and really, he could see a good 50% of the basement. Rigney let out a growl, and started looking around for him. he hoped he would look upstairs. but it looked unlikely he would. (without a push) so Schroeder acted again on instinct, and hit the stairs, hoping to trick Rigney into thinking he slipped passed him. Rigney turned around, and ran upstairs. YES. as quietly as he could, he slipped upstairs. he could see a dark shadow at the end of the left hallway, which led to the bed and bath room. it seemed he was searching the rooms. so he took the chance to step out the front door. he unlocked the door, which was pretty quiet. but the real predicament was with the slider. it ALWAYS creaked. and if he opened it, he would be found. so, he grabbed the car keys off of the counter. then planed to run for the car. he prepared himself, then ran... After about 10 feet, he heard the familiar creak. he knows he\'s been found, but he doesn\'t turn around. he races for the car, with Rigney behind him. Rigney was slightly faster than Schroeder. but he had the advantage. he was in the car and locked all the doors. he could see the frustration in Rigney\'s face as he beat down the car. Schroeder was going to ponder why Rigney was trying to murder the car. but there was no time. he inserted the keys into the slot and attempted to start the car. he heard the engine try with all its might. but it seemed the battery was dead. or the spark plug was screwed. he hoped it was the former. he opened the panel under the wheel and examined the wires. the two always kept AA batteries in the glove box. which was his only hope in order to start the car. he took one and cut a red wire under the wheel. he attached the two cut sides to the battery. the hope was that the wire only had access to the sparks. which he was confident was not enough to have an undersupply of power. he turned the key. the engine sputtered and stirred, and started! but in the 5 minuets it took start the car, Rigney had found a way to open the trunk, which held a hammer. he ran to the driver\'s side, and slammed the window. which cracked. Schroeder put the car in drive. the window broke. Rigney grabbed Schroeder\'s throat. he slammed the gas and took off. he crashed into the neighbor\'s mailbox. at least he could breath now. he saw Rigney sprinting toward him. Schroeder put it in drive and took off toward freedom... sweet freedom... he thought he was home free. until the car started to wiggle around. then it got worse. he was slowing down. it took him a second to figure out that A: the tires have been popped, and B: Rigney had a fucking gun. A FUCKING GUN. Schroeder was in deep. he got only 20 feet before Rigney was back at the driver\'s side. at gun point, Schroeder said. \"What are you getting out of this!?\" a slight laugh came from rigney. "my dream in life." he said. Schroeder gave the engine all it had, but A: it was too slow it out run Rigney, and B: he had just killed the engine. the car halted without any power. and Schroeder was still in some deep shite. Rigney yanked open the door and pulled Schroeder out. still at gunpoint, he was pushed back towards the house. and despite all of this, he was still handcuffed. he could do nothing. once back in the house, Rigney properly (and with a cable instead of a rope) tied him back \"in his place\". he knew that, if he were to escape again, it would be much harder. another thought popped in his head. \"Rigney would have his tools by now\". fak. once back downstairs, Rigney had a satan\'s cabinet full of \"tools\". and it was Schroeder\'s ass at the helm. \"shall we begin?\" Rigney started buy looking through a crate in the basement, he found a pink fur suit. he swiftly put it on. Like he was an expert. he then booted up his pc again. after 5 awkward minutes of silence, it booted up, and Rigney started navigating his files. he then came upon a file called p0rn_st4sh. he entered it. then there were 5 other files. hentai, pedophilia, necrophilia, bestiality, furry. you can guess which one he picked. the video he chose was 20 minuets, indicated by the video program. and only 5 was "plot". the rest was... OH GOD. that\'s not my fetish. but Schroeder still had the audacity to pay attention this time. he had to endure 15 minutes of agony. but that wasn\'t the worst part. when the video was done. Rigney pulled out a knife and cut a hole on the ass of the fur suit. it went through everything. everything. he was about to be raped by an idiot in a fur suit. great. but if that wasn\'t worse enough, Rigney just pulled out a brand new bottle of lube. probably home made. he was about to lose his virginity to a gay furry... Rigney started pulling down Schroeder\'s pants to reveal a mighty pair of boxers... Rigney pulled out his knife again. upon closer inspection it had "smut" engraved on the blade. and Rigney carefully cut a hole in the boxers to reveal the pingas. fak. he then grabbed one of his finest \"tools\". and to be honest, Schroeder really couldn\'t do anything. Rigney turned Schroeder around in the chair. he then cut a hole on the ass of the boxers. he then grabbed his trusty \"tool\" and prepared it for penetration. his homemade lube was finally going to be used for things other that masturbation. it was prepared. the insertion was about to happen. Schroeder was about to get more suicidal then he already was. and Rigney was about to get erect. it slid in. Rigney was erect and Schroeder was trying to find away to hang himself with the cable. after failing to do so, Schroeder just took it. there was nothing he could do. at least not now. 5 minutes go by and Rigney finds himself wore out from playing with his toy. so he put it down and turned Schroder around. he had the face of goddammit, and kill me at the same time. Rigney muttered. my turn...'
    shrigney = shrigney.split(".")
var shrigney2 = "Rigney ran upstairs and presumably into the bathroom. Since he was sure rigney was too exitied to test his dongle expander succ method that he would most likely live schroeder alone for awhile. He had enough time to pick up the dong knife. he slid the chair over and grabbed the knife off a table. because if it was on the floor it would be too far to reach. thanks plot holes. schroeder cuts the rope with the knife, somehow, and walks up the stairs. he heard distant soft moaning from the bathroom. he decided to take one peek. he fucking found rigney in the bathtub with his somehow obtained 7 foot dong working through his intestines. \"RIGDLED, WAT DE FUK MAN?\" \"MMMMMMMNMMNMNM\" was all that came from rigney. wait... Rigney removed his 7 foot penis from his digestive system. it swung Schroeder onto the floor with it\'s sheer mass and girth. \"ME ME HAVE 7 FOOT PEEEEEEEEEEEEEEENIIIIIIIIIIIIIIIIIIIIIIIIS\"  \"JESUS CHRIST WHAT THE FUCK\"  \"I WANT SCHROEDER ASS AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" \"HOLY SHIT HOLY FUCK\" Schroeder ran out of the doors as fast as possible. he wasnt faster than rigney, and everyone was drawn to the sight of 7 foot penis against Schroeder\'s little body. All came around to take pictures. \"COME BACK SCHROEDER. DONT RUN FROM MASSIVE PENIS.\" \"ILL DO WHAT EVER I WANT... CUNT\" They both ended their chase and a cliff edge. \"NO MORE RUNNING LITTLE BITCH\" \"IM NOT DONE YET PRICK\" Schroeder jumped off the cliff with no expectation for survival. however, he felt like he was no longer falling, but going very fast forwards. he opened his eyes to see a FUCKING STAMPEDE OF EMU SHITS. A WHOLE LOAD OF THEM. I MEAN LIKE A FUCKING SHIT TON. THEY\'RE EVERYWHERE. He would ride off into the sunset as the new god pf emus. Rigney stood perplexed at the absudety of the past 2 hours. \"Why do i have a massive penis again?\" The end."
    shrigney2 = shrigney2.split(".")
var shrigpick = shrigney2.concat(shrigney)
var isReady = true
var redditClearTimeout 
var usingtts = "" 
var ttstimeout   
var help1 = 
    "**-help**\nSend help\n"+
    "**-pfp** (@mention)\nGet a mentioned user's profile picture\n"+
    "**-user** (@mention)\nShow info about a mentioned user\n"+
    "**-server**\nShow info about the server the command is sent in\n"+
    "**-snipe**\nShow the last deleted message in your server\n"+
    "**-editsnipe**\nShow the last message befor it was edited in your server\n"+
    "**-embed** [Title], [Text], [Hex Color], [Image URL/false], [Footer], [Timestamp true/false], [Thumbnail Image Url/false]\nCreate a fancy message.\n"
  var help2 =
    "**-cat**\nMeow\n"+
    "**-dog**\nBork\n"+
    "**-ship** (name) (name)\nCreate ship names and a percentage of compatibility\n"+
    "**-kill** (@mention or name)\nKill your friends\n"+
    "**-8ball** [question]\nAnswer your deepest questions about life\n"+
    "**-flip**\nFlip a coin\n"+
    "**-trump** [message]\nHave Donald Duck say things in vc\n"+
    "**-urban** [term]\nGet descriptions from the urban dictionary\n"//+
    //"**-dmflood** (number of messages) (@mention) [message]\nSend someone a dm a certain number of times\n"
      
var help3 =
    "**-guess**\nNumber guessing game\n"+
    "**-c4** (@mention)\nMention someone to play connect 4 against them, or against random computer with no mention\n"+
    "**-simon**\nPlay a game of simon\n"+
    "**-ttt** (@mention)\nMention someone to play Tic-Tac-Toe against them, or against random computer with no mention\n"
    
    
var help4 = 
    "**-cipher** [message]\nNumber cipher\n"+
    "**-rot13** [message]\nRot13 cipher\n"+
    "**-binary** [message]\nBinary cipher\n"+
    "**-morse** [message]\nConvert message to morse code\n"+
    "**-decipher** [ciphered message]\nDecipher messages from any above commands\n"+
    "**-scramble** [text]\nScramble a message\n"+
    "**-reverse** [text]\nReverse a message\n"+
    "**-randomsort** [list separated by commas]\nRandomly arrange items in a list separated by commas\n"+
    "**-sort** [list separated by commas]\nAlphabetically sort items in a list separated by commas\n"+
    "**-replace** (thing to replace) (thing replacing with) [text]\nReplace all instances of the first word with the second "

var help5 =     
    "**-reddit** [subreddit name]\nPull posts from a subreddit, or the main page if no sub is provided\n"+
    "**-say** (channel name/#mention) [message]\nHave maplebot say things in your server\n"+
    "**-math** [problem]\nSolve math problems\n"+
    "**-randomcolor**\nGet a random color hex code\n"+
    "**-color** [color name/hex/rgb]\nShow a color and give the color in other forms\n"+
    "**-roll** (number of dice) (sides on dice)\nRoll dice\n"+
    //"**-eval** [code]\nRun js code as if it was one of the commands\n"+
    "**-timer** (number followed by s, m, or h)\nSet a timer\n"+
    "**-image** [query]\nsearch the internet for images of anything\n"+
    "**-tts** [input]\nread text in vc using google translate tts\n"
var recent = `Recent Updates and Changes\n\`\`\`\n*Added -snipe to catch deleted messages\n*-ttt, -simon, and -c4 work again\n*Added very basic music commands\`\`\``

       
var shipometer2 = ["<:emptyleft:529734821564645376><:empty:529734821258461195><:empty:529734821258461195><:empty:529734821258461195><:emptyright:529734821451399170> ",
                  "<:emptyleft:529734821564645376><:empty:529734821258461195><:empty:529734821258461195><:empty:529734821258461195><:emptyright:529734821451399170> ",
                  "<:halfredleft:529734821807915018><:empty:529734821258461195><:empty:529734821258461195><:empty:529734821258461195><:emptyright:529734821451399170> 1",
                  "<:redleft:529734821526896641><:empty:529734821258461195><:empty:529734821258461195><:empty:529734821258461195><:emptyright:529734821451399170> 2",
                  "<:redleft:529734821526896641><:redhalf:529734821833080832><:empty:529734821258461195><:empty:529734821258461195><:emptyright:529734821451399170> 3",
                  "<:redleft:529734821526896641><:redfull:529734821690474496><:empty:529734821258461195><:empty:529734821258461195><:emptyright:529734821451399170> 4",
                  "<:redleft:529734821526896641><:redfull:529734821690474496><:redhalf:529734821833080832><:empty:529734821258461195><:emptyright:529734821451399170> 5",
                  "<:redleft:529734821526896641><:redfull:529734821690474496><:redfull:529734821690474496><:empty:529734821258461195><:emptyright:529734821451399170> 6",
                  "<:redleft:529734821526896641><:redfull:529734821690474496><:redfull:529734821690474496><:redhalf:529734821833080832><:emptyright:529734821451399170> 7",
                  "<:redleft:529734821526896641><:redfull:529734821690474496><:redfull:529734821690474496><:redfull:529734821690474496><:emptyright:529734821451399170> 8",
                  "<:redleft:529734821526896641><:redfull:529734821690474496><:redfull:529734821690474496><:redfull:529734821690474496><:halfredright:529734821799526410> 9",
                  "<:redleft:529734821526896641><:redfull:529734821690474496><:redfull:529734821690474496><:redfull:529734821690474496><:redright:529734822101385246>",
                  "<:redleft:529734821526896641><:redfull:529734821690474496><:redfull:529734821690474496><:redfull:529734821690474496><:redright:529734822101385246>",
                  // "<:emptyleft:529734821564645376><:empty:529734821258461195><:empty:529734821258461195><:empty:529734821258461195><:halfblueright:529734821593874463> -1",
                  // "<:emptyleft:529734821564645376><:empty:529734821258461195><:empty:529734821258461195><:empty:529734821258461195><:blueright:529734821547737108> -2",
                  // "<:emptyleft:529734821564645376><:empty:529734821258461195><:empty:529734821258461195><:bluehalf:529734821522702337><:blueright:529734821547737108> -3",
                  // "<:emptyleft:529734821564645376><:empty:529734821258461195><:empty:529734821258461195><:bluefull:529734821707120660><:blueright:529734821547737108> -4",
                  // "<:emptyleft:529734821564645376><:empty:529734821258461195><:bluehalf:529734821522702337><:bluefull:529734821707120660><:blueright:529734821547737108> -5",
                  // "<:emptyleft:529734821564645376><:empty:529734821258461195><:bluefull:529734821707120660><:bluefull:529734821707120660><:blueright:529734821547737108> -6",
                  // "<:emptyleft:529734821564645376><:bluehalf:529734821522702337><:bluefull:529734821707120660><:bluefull:529734821707120660><:blueright:529734821547737108> -7",
                  // "<:emptyleft:529734821564645376><:bluefull:529734821707120660><:bluefull:529734821707120660><:bluefull:529734821707120660><:blueright:529734821547737108> -8",
                  // "<:halfblueleft:529734821807783986><:bluefull:529734821707120660><:bluefull:529734821707120660><:bluefull:529734821707120660><:blueright:529734821547737108> -9",
                  // "<:blueleft:529734821824692224><:bluefull:529734821707120660><:bluefull:529734821707120660><:bluefull:529734821707120660><:blueright:529734821547737108>"]
                   ]
var nyoom = ["0%","1%","2%","3%","4%","5%","6%","7%","8%","9%"]
var args = ['arg1', 'arg2', 'arg3']
var invite = 'https://discordapp.com/api/oauth2/authorize?client_id=493908132544643082&permissions=8&scope=bot'
var authorid = 409494455079403533
var kills = [
  ' was stabbed in the back by their closest freind, literally',
  ' took a shrigney in the ass and died',
  ' swallowed a cyanide capsule, And died the next afternoon in a car crash',
  ' was threatened by a pinecone',
  ' was blown off a bridge by a gentle breeze',
  ' ate a sandwich that was actually made of sand',
  ' ate mentos and drank coke at the same time',
  ' was put in a syrupy gulag my communist canadians',
  ' made the mistake of joining UK Crew and were gassed by Germany',
  ' opened the nsfw chat but only got bowsette',
  " was shot by some kid who pulled out an AK-47 at the summer camp water gun fight",
  ' died of dyssentery',
  ' experienced kinetic energy whilst attempting to flee from the ender dragon',
  ' recieved a gud succ from a venomous snake',
  ' bought too many Vbucks and died on the streets',
  ' decided to visit cherynobl',
  ' made a super powerful cleaning product by combining bleach and ammonia',
  ' summoned MechaHitler',
  ' fell up and hit their feet',
  ' got free robux and the FBI broke into their house',
  ' downed 73 bottles of coke in an hour',
  ' stubbed their toe on molten tungsten',
  ' was covered in spiders, and there was nothing they could do about it',
  ' jumped out of their basement window and flew upward into space',
  ' drowned in a pool of cool whip',
  ' died in a dream that was actually real life',
  ' ate vegetables',
  ' took 28 knives in the toe',
  ' was unborn',
  ' slighty burned their finger on the stove, and died from it',
  ' took a tour of a gulag and didn\'t return',
  ' followed a youtube tutorial of how to tie a noose',
  ' was walking on a sidewalk and tripped on a mysterious rubber object',
  ' did a totally sick loop-da-loop but broke their neck in the process',
  ' inhaled spiders',
  ' tried to teleport with their pet fly',
  ' was visited by the peruvian flute doot',
  ' was way too spooky and was killed by some trick-or-treating kids on halloween',
  ' got oofed',
  ' was snapped by thanos',
  ' got hit by thanos car',
  ' mined straight down',
  ' tried to mine diamonds with a wooden pickaxe and commit neck rope',
  ' was told to go commit die',
  ' drank water',
  ' suffocated in a backpack',
  ' accidentally knocked the toaster into the bathtub',
  ' misperformed a spell',
  ' had an allergic reaction to a single leaf',
  ' burned their sims but karma caught up to them and they died in a house fire',
  ' drank bear urine',
  ' was caught in a time travel duel',
  ' did a fortnite dance in public',
  ' forgot to save after a 5 hour gaming session',
  ' tried sword swallowing',
  ' said something that wasn\'t politically correct',
  ' stepped on a lego',
  ' was crushed in a clown car',
  ' died from diabetes when they ate too much sugar-free gum',
  ' drowned in a glass of water'
]
var ball = [
  "Yes",
  "It's very likely",
  "It's possible",
  "Maybe",
  "Not likely",
  "No",
  "Impossible",
  "Only if you give me $5",
  "Yes, But not if you're human",
  "NEVER",
  "100% Guarunteed"]
var run = false;
var leaveVcTimeout
const times = x => f => {
  if (x > 0) {
    f()
    times (x - 1) (f)
  }
}
var imageTimeout
var helpTimeout
var playing = ["with fire","with knives","with your mind","in the trees","MapleBot is best bot","MapleBot stuff","pp","bit.ly/maplebot","mm tasty data","owo","expand dong","nothing","zucc","minecraft with the boys","bit.ly/sub2maple","epic gamer moments","christian minecraft"]



client.on("ready", () => {
  setInterval(()=>{
    client.user.setPresence({
    game: {
      name: playing[Math.floor(Math.random()*playing.length)]+" | -help",
      type: 'PLAYING'
    } 
  }) 
  },3600000)
  console.log("( ͡° ͜ʖ ͡°)")
})

var snipeEmbed
var snipedIn

client.on("messageDelete", msg => {
  var color = msg.member.displayColor==0?0x39393e:msg.member.displayColor
      snipeEmbed = new Discord.RichEmbed()
     .setAuthor(msg.member.displayName,msg.author.avatarURL)
     .setDescription(msg.content)
     .setColor(color)
     .setTimestamp(new Date())
  snipedIn = msg.guild.id
});

var snipeEdit
var snipedIn2

client.on("messageUpdate", (msg, newMessage) => {
  if(msg.author.id=='155149108183695360')return
  var color = msg.member.displayColor==0?0x39393e:msg.member.displayColor
      snipeEdit = new Discord.RichEmbed()
     .setAuthor(msg.member.displayName,msg.author.avatarURL)
     .setDescription(msg.content)
     .setColor(color)
     .setTimestamp(new Date())
  snipedIn2 = msg.guild.id
});

client.on("message", async message => {
  
})

var dispatcher


client.on("message", async message => {
  //if(message.author.id!=="409494455079403533")return
  ///^^^^^^ Disable bot.
 
  if (message.content.indexOf(config.prefix) !== 0) return;
  
  var color = message.member.displayColor
  if(color=='0'){color=15724527}
  var member = message.mentions.members.first();  
  var args = message.content.slice(config.prefix.length).trim().split(/ +/g);
  const command = args.shift().toLowerCase();
  const ownerCommand = (message.author.id=="409494455079403533") ? command : ""
  var arg1 = args[0]
  var arg2 = args[1]
  var arg3 = args[2]

  if(message.content.startsWith("-Ship")){
    function createShip(a,b){
      var possibleShip = [a.split("").slice(0,Math.round(a.length/2)).join("")+b.split("").slice(Math.round(b.length/2,b.length)).join(""),
                         b.split("").slice(0,Math.round(b.length/2)).join("")+a.split("").slice(Math.round(a.length/2,a.length)).join("")
                         ]
      return possibleShip[Math.floor(Math.random()*possibleShip.length)]
    }
    var randomperc = nyoom[0]
    var oof4 = 11
    arg1 = arg1.toLowerCase().split("_").join(" ")
    arg2 = arg2.toLowerCase().split("_").join(" ")
    var ship = createShip(arg1,arg2)
    if(shipometer2[oof4]==="<:redleft:529734821526896641><:redfull:529734821690474496><:redfull:529734821690474496><:redfull:529734821690474496><:redright:529734822101385246>") {randomperc=" 100%"}
    if(shipometer2[oof4]==="<:blueleft:529734821824692224><:bluefull:529734821707120660><:bluefull:529734821707120660><:bluefull:529734821707120660><:blueright:529734821547737108>") {randomperc=" -100%"}
    var output = arg1+" + "+arg2+" = **"+ship+"**\n\n"+shipometer2[oof4]+randomperc+" Match"
    const embed = new Discord.RichEmbed()
    .setColor(color)
    .setDescription(output)
    message.channel.send(embed)
    return
  }
  
  if(command=='colorme'){
    if(args.join("").toLowerCase()=='help'){
      var embed = new Discord.RichEmbed()
      embed.setTitle("Colorme help")
      embed.setDescription("colorme can use any hex color (ex. #7289de) or any web color. see a list of web colors [here.](https://htmlcolorcodes.com/color-names/)")
      message.channel.send(embed)
    }else{
    var colour = require('color')
    var colorCheck = args.join("").toLowerCase(),
        newColor;
    if(colorCheck=='remove'||colorCheck=='clear'||colorCheck=='none'){return message.member.roles.find("name",message.member.displayHexColor.toLowerCase()).delete()}else
    if(/^#[0-9A-F]{6}$/i.test(colorCheck)){newColor=colorCheck}else
    if(/^#[0-9A-F]{6}$/i.test("#"+colorCheck)){newColor="#"+colorCheck}else
    if(/^#[0-9A-F]{6}$/i.test(colour(colorCheck).hex().toLowerCase())){newColor=colour(colorCheck).hex().toLowerCase()}else
    {return message.channel.send("Failed to add role, "+colorCheck+" is an invalid color. Use -colorme help for options.")}
    var currentRole = message.member.roles.find("name",message.member.displayHexColor.toLowerCase())
    message.guild.createRole({name: newColor, color: newColor})
    .then(role=>{message.member.addRole(role.id.toString())
                 message.channel.send(":ok_hand: succesfully added color **"+colorCheck+"**")})
    if(currentRole!==undefined){currentRole.delete()}
    }
  }else

  if(command==='timer'){
    var timer = 60000
    timer = args[0][args[0].length]=="s" ? Number(arg1-"s")*1000 : 60000
    timer = args[0][args[0].length]=="m" ? Number(arg1-"m")*60000 : 60000
    timer = args[0][args[0].length]=="h" ? Number(arg1-"h")*360000 : 60000
    setTimeout(()=>{
     message.channel.send("* Alarm Noises *") 
    },timer)
    message.react("✅")
  }else
   
  if(command=="wikihow"){
    var wikihow = require('how-to-what');
 
    // Use getSteps() for an array of steps.
    wikihow.howTo('make an NPM module')
    .then(console.log)
    .catch(console.error);
  }
    
  if(command=='say'){
   var mess = args.slice(1,args.length).join(' ')
   var chan = message.guild.channels.find('name',args[0])
   if(message.mentions.channels.first()!==undefined){chan=message.mentions.channels.first()}
   if(args[0]=='here'){chan=message.channel}
   chan.send(mess)
   message.delete()
   }else
    
  if(command=='translate'){
    const translate = require('translate')
    const text = await translate('Hello world', 'es')
    console.log(text)
  }else
    
  if(command=='tts'){
  if(usingtts=="") {usingtts = message.author.id               
                   }
  if(usingtts!==message.author.id){
  return message.channel.send("text-to-speech is already being used")
  }else{
  const filter = m => m.author.id==message.author.id;
const collector = message.channel.createMessageCollector(filter);
  ttstimeout = setTimeout(()=>{
  usingtts = ""
  collector.stop()
  message.channel.send("Text-to-speech timed out")
  message.member.voiceChannel.leave()
  },120000) 
message.member.voiceChannel.leave()
message.member.voiceChannel.join()
message.channel.send("Started text-to-speech.")
collector.on('collect', m => {
  var toSpeak = m.content
  if(m.content[0]=="/")return
  clearTimeout(ttstimeout)
  ttstimeout = setTimeout(()=>{
  usingtts = ""
  collector.stop()
  message.channel.send("Text-to-speech timed out")
  message.member.voiceChannel.leave()
  },120000)
 var googleTTS = require('google-tts-api');
  googleTTS(toSpeak, 'en', 0.7)
  .then(function (url) {
  message.member.voiceChannel.join().then(connection=>{
  connection.playArbitraryInput(url)
  });
})
.catch(function (err) {
  console.error(err);
});
});

  }
  }else

  if(command=='snipe'){
    if(snipedIn!==message.guild.id)return message.channel.send("Nothing to snipe here")
     message.channel.send(snipeEmbed)                     
  }else
    
  if(command=='editsnipe'){
    if(snipedIn2!==message.guild.id)return message.channel.send("Nothing to snipe here")
     message.channel.send(snipeEdit)                     
  }else
    
  if(command=='i'||command=='image'||command=='im'||command=='img'){
    const GoogleImages = require('google-images');
    const searchClient = new GoogleImages('000115419517435716630:iayhuwunmr8', 'AIzaSyDQZ1R9YkyJ48d8QM4Wn5_vpJbJJt29hRY');
    var onPage = 1
    var searchterm = args.join(" ")

    searchClient.search(searchterm,{page:1})
    .then(images => {
      console.log(images)
      var onImage = 0
      
      var size = images.length
      var embed = new Discord.RichEmbed()
      .setDescription("[Image]("+images[onImage].url+")")
      .setImage(images[onImage].url)
      .setFooter(onImage+1+" of 10")
      .setTimestamp(new Date())
      .setColor(color)
      var id = message.author.id
      message.channel.send(embed).then(message=>{
        message.react("⬅").then(()=>message.react("➡").then(()=>message.react("🛑")))
        const filter = (reaction, user) => reaction.emoji.name === "⬅" && user.id == id||reaction.emoji.name === "➡" && user.id == id||reaction.emoji.name === "🛑" && user.id == id
        const collector = message.createReactionCollector(filter,{});
        imageTimeout = setTimeout(()=>{collector.stop()},60000)
        collector.on('collect', r => { 
                                      r.remove(client.users.get(id))
                                      clearTimeout(imageTimeout)
                                      imageTimeout = setTimeout(()=>{collector.stop()},60000)
                                      if(r.emoji.name == "➡"){
                                        onImage = onImage + 1
                                      } else if(r.emoji.name == "⬅"){
                                        onImage = onImage - 1
                                      } else if(r.emoji.name == "🛑"){
                                        collector.stop()
                                        message.clearReactions()
                                        return message.delete()
                                      }
          if(onImage<=-1){onImage=9}
          if(onImage>=10){onImage=0}
      var embed = new Discord.RichEmbed()
      .setDescription("[Image]("+images[onImage].url+")")
      .setImage(images[onImage].url)
      .setFooter((onImage+1+(10*(onPage-1)))+" of 10")
      .setTimestamp(new Date())          
      .setColor(color)
      message.edit(embed)
                                     });
        collector.on('end', collected => {message.clearReactions()});

        })
    });
  }else
  
    if(command=='play'){
    const ytdl = require("ytdl-core")
    var Search = require("youtube-search-lib")
    var video = 0
    Search({ key: 'AIzaSyAYzp4zHgepkqSKFb5j8OxFLQ3kCstK5Mg', term: args.join(" "), maxResults: 1 })
    .then(results => {
    function playSong(id){
    var fetchVideoInfo = require('youtube-info');
    fetchVideoInfo(results[video].id.videoId).then(function (videoInfo) {
    var date = new Date(null);
    date.setSeconds(videoInfo.duration); // specify value for SECONDS here
    var result = date.toISOString().substr(11, 8);
    var embed = new Discord.RichEmbed()
      .setColor(color)
      .setThumbnail(videoInfo.thumbnailUrl)
      .setDescription("**Now Playing:** ["+videoInfo.title+"]("+videoInfo.url+")\n"+
      "**Duration:** "+result.toString())
      message.channel.send(embed)    
		const voiceChannel = message.member.voiceChannel;
		if (!voiceChannel) {
			return message.reply('please join a voice channel first!');
		} 
     
		voiceChannel.join().then(connection => {
			var stream = ytdl(videoInfo.url, { filter: 'audioonly' });
      console.log(stream) 
			var dispatcher = connection.Stream(stream);
    
			dispatcher.on('end', () => { 
         voiceChannel.leave() 
      });
      
    
        
    })
      
    })
    }
    playSong()
    })
    
  }else
    
    if(command=='stop'||command=='leave'){
      dispatcher.destroy()
    }else  
    
  if(command=='embed') {
    const commArgs = args.join(" ").split(/, +/g).join(",").split(/,+/g);
    var embed = new Discord.RichEmbed()
    var title = commArgs[0] == undefined ? "" : embed.setTitle(commArgs[0])
    var description = commArgs[1] == undefined ? "" : embed.setDescription(commArgs[1])
    var color = commArgs[2] == undefined ? "" : embed.setColor(Number("0x"+commArgs[2].toLowerCase().split("#").join("").split(" ").join("")))
    var image = commArgs[3] == undefined || commArgs[3] == "false" ? "" : embed.setImage(commArgs[3])
    var footer = commArgs[4] == undefined ? "" : embed.setFooter(commArgs[4])
    var timestamp = commArgs[5] !== undefined && commArgs[5] == "true" ? embed.setTimestamp(new Date()) : ""
    var thumbnail = commArgs[6] == undefined ? "" : embed.setImage(commArgs[6])
    return message.channel.send(embed)
  }else
    
  if(command==='server'){
   function checkBots(guild) {
    let botCount = 0; // This is value that we will return
    guild.members.forEach(member => { // We are executing this code for every user that is in guild
    if(member.user.bot) botCount++; // If user is a bot, add 1 to botCount value
    });
    return botCount; // Return amount of bots
  }
   function checkUsers(guild) {
    let botCount = 0; // This is value that we will return
    guild.members.forEach(member => { // We are executing this code for every user that is in guild
    if(!member.user.bot) botCount++; // If user is a bot, add 1 to botCount value
    });
    return botCount; // Return amount of bots
  }
   function checkOnlineMembers(guild) {
    let onlineCount = 0;
    guild.members.forEach(member => {
    if(!member.user.bot && member.user.presence.status === 'online') onlineCount++; // If user isn't bot, add 1 to value. 
    });
    return onlineCount;
  }
   function checkIdleMembers(guild) {
    let onlineCount = 0;
    guild.members.forEach(member => {
    if(!member.user.bot && member.user.presence.status === 'idle') onlineCount++; // If user isn't bot, add 1 to value. 
    });
    return onlineCount;
  }
   function checkDndMembers(guild) {
    let onlineCount = 0;
    guild.members.forEach(member => {
    if(!member.user.bot && member.user.presence.status !== 'online' || member.user.presence.status !== 'idle' || member.user.presence.status !== 'offline') onlineCount++; // If user isn't bot, add 1 to value. 
    });
    return onlineCount;
  } 
   function checkOfflineMembers(guild) {
    let offlineCount = 0;
    guild.members.forEach(member => {
    if(!member.user.bot && member.user.presence.status === 'offline') offlineCount++; // If user isn't bot, add 1 to value. 
    });
    return offlineCount;
  }
   function listRoles(guild) {
    let roleList = " ";
    guild.roles.forEach(role => {
    roleList = roleList + role.name + ", "
    });
    return roleList;
  }
  var dnd = Number(checkUsers(message.guild))-Number(checkOnlineMembers(message.guild))-Number(checkIdleMembers(message.guild))-Number(checkOfflineMembers(message.guild))
  let embed = new Discord.RichEmbed()
    .setAuthor("Info for "+message.guild.name, message.guild.iconURL)
    .setDescription("[Server Icon]("+message.guild.iconURL+")")
    .addField('Server owner', message.guild.owner, true)
    .addField('Server region', '`'+message.guild.region+'`', true)
    .addField('Channel count', '`'+message.guild.channels.size+'`', true)
    .addField('Roles','`'+message.guild.roles.size+'`\n```'+listRoles(message.guild)+'```',true)
    .addField('ID','`'+message.guild.id+'`',true)
    .addField('Total member count', '`'+message.guild.memberCount+'`')
    .addField('Humans', '`'+checkUsers(message.guild)+'`\n<:online:544601901010780170> `'+checkOnlineMembers(message.guild)+'` | <:idle:544601900482428929> `'+checkIdleMembers(message.guild)+'` | <:dnd:544601900520177666> `'+dnd+'` | <:offline:544601900717309963> `'+checkOfflineMembers(message.guild)+'`', true)
    .addField('Bots', '`'+checkBots(message.guild)+'`', true)
    .addField("Created on", '`'+message.guild.createdAt.toString().split(" ").slice(0,4).join(" ")+'`', true)
    .setColor(color)
    return message.channel.send(embed);
  }else
    
  if(command=='urban'){
  var def = message.content.toLowerCase().replace("-urban ","")
  if(def==undefined){
  ud.random((error, entry) => {
  if (error) {
  console.error(error.message)
  } else {
  var embed = new Discord.RichEmbed()
  .setColor(color)
  .setAuthor(entry.word)
  .addField("Definition",entry.definition.split("[").join("").split("]").join(""))
  .addField("Example",entry.example.split("[").join("").split("]").join(""))
  message.channel.send(embed)
  }
  })}else
  {ud.term(def, (error, entries, tags, sounds) => {
  if (error) {
  message.channel.send("Pretty sure that doesn't exist") 
  console.error(error.message)
  
  } else {
  var embed = new Discord.RichEmbed()
  .setColor(color)
  .setAuthor(entries[0].word)
  .setDescription(entries[0].definition.split("[").join("").split("]").join("").split("").slice(0,2048).join(""))
  .addField("Example",entries[0].example.split("[").join("").split("]").join(""))
  message.channel.send(embed)
  }
  })}
  }else
    
  if(command=='trump'||command=='texttotrump'){
    var content = message.content.replace("-"+command+" ","")
    if (message.member.voiceChannel) {
			message.member.voiceChannel.join().then(function() {
			}).catch(function() {
				message.channel.send("I need permission to join your voice channel! Believe me, it's true.").catch(console.error);
			});
		} else {
			message.channel.send("Join a voice channel! You won't regret it, believe me.").catch(console.error);
		}
    const connection = message.guild.voiceConnection;
		if (connection) {
      clearTimeout(leaveVcTimeout )
      var leaveVcTimeout = setTimeout(()=>{connection.disconnect()},30000)
			var play = connection.playArbitraryInput("async:http://api.jungle.horse/speak?v=trump&vol=3&s=" + encodeURIComponent(content + " um"))
      if(connection.members.size<=1){connection.disconnect()} 
		}
  }else
  
  if(command==='user'){
    function listRoles(GuildMember) {
    let roleList = "";
    GuildMember.roles.forEach(role => {
    roleList = roleList + role.name + ", "
    });
    roleList=roleList.split("").slice(0,roleList.length-2).slice(11,roleList.length).join("")
    if(roleList==""){roleList="none"}
    return roleList;
    }
    var user=message.mentions.users.first();if(user===undefined){user=message.author}
    var member=message.mentions.members.first();if(member===undefined){member=message.member}
    var nick=member.displayName;if(nick===member.username){nick="No Nickname"}
    var status;if(user.presence.status==="online"){status="<:online:544601901010780170> `Online`"}else if(user.presence.status==="idle"){status="<:idle:544601900482428929> `Idle`"}else if(user.presence.status==='offline'){status="<:offline:544601900717309963> `Offline`"}else{status="<:dnd:544601900520177666> `Do Not Disturb`"}
    var bot=user.bot;if(bot==true){bot="`Yep`"};if(bot==false){bot="`Nope`"}
    if(member.presence.game!==null){var game = member.presence.game.name.toString()}else{game="nothing"}
    var roles=listRoles(member)
    let embed = new Discord.RichEmbed()
    .setAuthor(user.tag+" ("+nick+")")
    .setThumbnail(user.avatarURL)
    .setDescription("[Avatar URL]("+user.avatarURL+")")
    .setColor(member.displayColor)
    .addField("Roles","`"+member.roles.size+"`\n`"+roles+"`",true)
    .addField("User ID","`"+user.id+"`",true)
    .addField("Status",status+" (Playing "+game+")",true)
    .addField("Bot?",bot,true)
    .addField("Account created on","`"+user.createdAt.toString().split(" ").slice(0,4).join(" ")+"`",true)
    .addField("Joined server at","`"+member.joinedAt.toString().split(" ").slice(0,4).join(" ")+"`",true)
    message.channel.send(embed)
  }else
    
  if(command==='eval'){
   var toEval = message.content.replace("-eval","")
   var removeBackticks = toEval.split("```js").join("").split("```").join("")
   toEval = removeBackticks
   toEval = toEval.includes("process.env.TOKEN") ? "" : toEval
   try{
   let Eval = eval(toEval)
   message.react("✅")
   }catch(e){
    message.channel.send(e) 
   message.react("⚠")
    return console.log(e)
   }
  }

  if(command==='math'){
   let resp
   try{
   resp = math.eval(message.content.replace("-math ",""))
   } catch (e){
   message.channel.send("Please input a valid problem")
   }
   var embed = new Discord.RichEmbed()
   .setColor(color)
   .setTitle("MATH")
   .addField('Input:','```'+message.content.replace("-math ","")+'```',true)
   .addField('Solution:','```'+resp+'```',true)
   message.channel.send(embed)
  }else
  
  if(command==='reddit'){
    var sub = args.join("")
    var link;
    var LoadID
    message.channel.send("Fetching posts...").then(message=>{LoadID=message.id})
    //if(sub=='fiftyfifty') return message.channel.send('Imma just stop you right there.')
    if(sub==undefined){link='https://www.reddit.com/.json'}else{link='https://www.reddit.com/r/'+sub+'.json?sort=hot'}
          const { body } = await snekfetch
            .get(link)
            .query({limit:500});
        const allowed = body.data.children.filter(post => post.data.url.includes(".png") || post.data.url.includes(".jpg") || post.data.url.includes(".gif") );
        if (!allowed.length) return message.channel.send('Oi there was nothing where you sent me');
        var randomnumber = 0
        if(!message.channel.nsfw&&allowed[randomnumber].data.over_18){return message.channel.send("Hol up, that sub looks nsfw and this ain't an nsfw channel.")}
        var embed = new Discord.RichEmbed()
        .setColor(color)
        .setDescription("["+allowed[randomnumber].data.title+"](https://reddit.com"+allowed[randomnumber].data.permalink+")\n*" + allowed[randomnumber].data.author+"*")
        .setImage(allowed[randomnumber].data.url)
        .addField("<:upvote:545367585785380886> "+allowed[randomnumber].data.ups,":speech_left: "+allowed[randomnumber].data.num_comments,true)
        .setFooter("r/"+allowed[randomnumber].data.subreddit+" • "+(randomnumber+1)+" of "+allowed.length)
        .setTimestamp(new Date())
        var id = message.author.id
        message.channel.send(embed).then(async message=>{
       message.channel.fetchMessage(LoadID.toString()).then(messag=>{messag.delete()})
       await message.react("🔄")
       await message.react("⬅")
       await message.react("➡")
        const filter = (reaction, user) => reaction.emoji.name === '🔄' && user.id == id || reaction.emoji.name === '⬅' && user.id == id || reaction.emoji.name === '➡' && user.id == id
        const collector = message.createReactionCollector(filter,{});
        redditClearTimeout = setTimeout(()=>{collector.stop()},120000)
        collector.on('collect', r => {
                                      r.remove(client.users.get(id))
                                      clearTimeout(redditClearTimeout)
                                      redditClearTimeout = setTimeout(()=>{collector.stop()},30000)
                                      if(r.emoji.name === '🔄'){
                                        randomnumber = Math.floor(Math.random() * allowed.length)
                                      }else if(r.emoji.name=="⬅"){
                                        randomnumber -= 1
                                      }else if(r.emoji.name=="➡"){
                                        randomnumber += 1
                                      }
                                      embed = new Discord.RichEmbed().setColor(color).setDescription("["+allowed[randomnumber].data.title+"](https://reddit.com"+allowed[randomnumber].data.permalink+")\n*" + allowed[randomnumber].data.author+"*").setImage(allowed[randomnumber].data.url).addField("<:upvote:545367585785380886> "+allowed[randomnumber].data.ups,":speech_left: "+allowed[randomnumber].data.num_comments,true).setFooter("r/"+allowed[randomnumber].data.subreddit+" • "+(randomnumber+1)+" of "+allowed.length).setTimestamp(new Date())
                                      message.edit(embed)
                                     });
        collector.on('end', collected => {message.clearReactions()});

        })
  }else 
    
  if(command==='shrigney'){
    message.channel.send(shrigpick[Math.floor(Math.random()*shrigpick.length)])
  }else
  
  if(command==='loaf'){
   message.channel.send(":bread:") 
  }else

  if(command=='randomcolor'){
    var Color = require('color');
    var hexArr = ["a","b","c","d","e","f","0","1","2","3","4","5","6","7","8","9"]
    var hex = hexArr[Math.floor(Math.random()*hexArr.length)]+hexArr[Math.floor(Math.random()*hexArr.length)]+hexArr[Math.floor(Math.random()*hexArr.length)]+hexArr[Math.floor(Math.random()*hexArr.length)]+hexArr[Math.floor(Math.random()*hexArr.length)]+hexArr[Math.floor(Math.random()*hexArr.length)]
    var embedColor = Number("0x"+hex)
    var color = Color('#'+hex.toUpperCase())
    var colorString = require('color-string');
    var embed = new Discord.RichEmbed()
    .setColor(embedColor)
    .setTitle("Random Color")
    .addField("Name",colorString.to.keyword(color.rgb().array())==undefined ? "Unnamed" : colorString.to.keyword(color.rgb().array()),true)
    .addField("Hex Color","#"+hex)
    .addField("RGB",color.object().r+", "+color.object().g+", "+color.object().b)
    message.channel.send(embed)
    }else
    
    if(command==='color'){
    var Color = require('color');
    var colorString = require('color-string');
    var color = Color(args.join(""))
    var cmyk = color.cmyk().round().array()
    var hsl = color.hsl().round().string().split("")
    hsl.splice(0,4)
    hsl.splice(hsl.length-1,1)
    hsl=hsl.join("")
    
    var embed = new Discord.RichEmbed()
    .setTitle("Color Info")
    .addField("Name",colorString.to.keyword(color.rgb().array())==undefined ? "Unnamed" : colorString.to.keyword(color.rgb().array()),true)
    .addField("Hex",color.hex(),true)
    .addField("RGB",color.object().r+", "+color.object().g+", "+color.object().b,true)
    .addField("CMYK",cmyk[0]+", "+cmyk[1]+", "+cmyk[2]+", "+cmyk[3],true)
    .addField("HSL",hsl,true)
    .addField("RGB%",Math.floor(color.object().r/255*100)+"% "+Math.floor(color.object().g/255*100)+"% "+Math.floor(color.object().b/255*100)+"%",true)
    .addField("Decimal",color.rgbNumber().toString(),true)
    .addField("Grayscale",color.grayscale().hex().toString().toLowerCase(),true)
    .addField("Inverted",color.negate().hex().toString().toLowerCase(),true)
    .setColor(color.hex())
    
    message.channel.send(embed)
    }
      
  if(command==='flip'){
    var coinflip = Math.floor(Math.random()*coin.length)
    var hot
    if(coinflip===1){
    hot="TAILS"
    }else{hot="HEADS"}
    const embed = new Discord.RichEmbed()
    .setTitle(hot)
		.setImage(coin[coinflip])
    .setColor(color)
		message.channel.send(embed);
  }else
  
  if(command==='pp'){
   message.channel.send(":eggplant:") 
  }else

  if(command==="cat"){
   get('https://aws.random.cat/meow').then(res => {
				const embed = new Discord.RichEmbed()
        .setDescription("Cat.")
				.setImage(res.body.file)
        .setColor(color)
				return message.channel.send(embed);
			});
  }else
  
  if(command==="dog"){
   get('https://random.dog/woof.json').then(res => {
				const embed = new Discord.RichEmbed()
        .setDescription("Bork.")
				.setImage(res.body.url)
        .setColor(color)
				return message.channel.send(embed);
			});
  }else
  
  if(command==="rot13"){
    function rot13(str) {
  var input     = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
  var output    = ['N','O','P','Q','R','S','T','U','V','W','X','Y','Z','A','B','C','D','E','F','G','H','I','J','K','L','M','n','o','p','q','r','s','t','u','v','w','x','y','z','a','b','c','d','e','f','g','h','i','j','k','l','m'];
  var index     = x => input.indexOf(x);
  var translate = x => index(x) > -1 ? output[index(x)] : x;
  return str.split('').map(translate).join('');
  }
  var cypher = rot13(message.content.replace("-rot13 ",""))
    message.channel.send(cypher+".")
  }else
    
  if(command==='cipher'){
  function morse(str) {
  str=str.toLowerCase()
  var input = ['a',"b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"," ","0","1","2","3","4","5","6","7","8","9"];
  var output = [" 01" ," 02" ," 03" ," 04" ," 05" ," 06" ," 07" ," 08" ," 09" ," 10" ," 11" ," 12" ," 13" ," 14" ," 15" ," 16" ," 17" ," 18" ," 19" ," 20" ," 21" ," 22" ," 23" ," 24" ," 25" ," 26" ," 00" ," 000" ," 001" ," 002" ," 003" ," 004" ," 005" ," 006" ," 007" ," 008" ," 009" ]
  var index     = x => input.indexOf(x);
  var translate = x => index(x) > -1 ? output[index(x)] : x;
  return str.split('').map(translate).join('');
  } 
  message.channel.send(morse(message.content.replace("-cipher ",""))+" 00")
  }else
  
  if(command==='binary'){
  var ABC = {
  toAscii: function(bin) {
  return bin.replace(/\s*[01]{8}\s*/g, function(bin) {
  return String.fromCharCode(parseInt(bin, 2))
  })
  },
  toBinary: function(str, spaceSeparatedOctets) {
  return str.replace(/[\s\S]/g, function(str) {
  str = ABC.zeroPad(str.charCodeAt().toString(2));
  return !1 == spaceSeparatedOctets ? str : str + " "
  })
  },
  zeroPad: function(num) {
  return "00000000".slice(String(num).length) + num
  }
  };
    message.channel.send(ABC.toBinary(message.content.replace(command,"")))
  }else
  
  if(command==="morse"){
  function morse(str) {
  str=str.toLowerCase()
  var input = ['a',"b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z",".",",","?","'"," ","0","1","2","3","4","5","6","7","8","9","\"","@","-","(",")",":","=","!","+","*","#","~","&","/"];
  var output = [' •−',' −•••',' −•−•',' −••',' •',' ••−•',' −−•',' ••••',' ••',' •−−−',' −•−',' •−••',' −−',' −•',' −−−',' •−−•',' −−•−',' •−•',' •••',' −',' ••−',' •••−',' •−−',' −••−',' −•−−',' −−••',' •−•−•−',' −−••−−',' ••−−••',' •−−−−•'," /"," −−−−−"," •−−−−"," ••−−−"," •••−−"," ••••−"," •••••"," −••••"," −−•••"," −−−••"," −−−−•"," •−••−•"," •−••−•"," •−−•−•"," −••••−"," −•−−•"," −•−−•−"," −−−•••"," −•••−","−•−•−−"," •−•−•"," ••−−••"," •−•−−•"," •−−•−•"," •−•••"," −••−•"]
  var index     = x => input.indexOf(x);
  var translate = x => index(x) > -1 ? output[index(x)] : x;
  return str.split('').map(translate).join('');
  }
  var out = morse(message.content.replace("-morse ",""))
  message.channel.send(out)
  }else

  if(command==="decipher"){
        function rot13(str) {
  var input     = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
  var output    = ['N','O','P','Q','R','S','T','U','V','W','X','Y','Z','A','B','C','D','E','F','G','H','I','J','K','L','M','n','o','p','q','r','s','t','u','v','w','x','y','z','a','b','c','d','e','f','g','h','i','j','k','l','m'];
  var index     = x => input.indexOf(x);
  var translate = x => index(x) > -1 ? output[index(x)] : x;
  return str.split('').map(translate).join('');
  }
  function isArrayBool(array) {
  for (var i of array) {
  if (i !== 0 && i !== 1 && i !== " ") return false;
  }
  return true;
  }
  var input = message.content.replace("-decipher ","")
  if(input.includes("•")||input.includes("−")){
  var alph = ['a',"b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z",".",",","?","'","_","0","1","2","3","4","5","6","7","8","9","\"","@","-","(",")",":","=","!","+","*","#","~","&","/"];
  var morse = [' •−',' −•••',' −•−•',' −••',' •',' ••−•',' −−•',' ••••',' ••',' •−−−',' −•−',' •−••',' −−',' −•',' −−−',' •−−•',' −−•−',' •−•',' •••',' −',' ••−',' •••−',' •−−',' −••−',' −•−−',' −−••',' •−•−•−',' −−••−−',' ••−−••',' •−−−−•'," /"," −−−−−"," •−−−−"," ••−−−"," •••−−"," ••••−"," •••••"," −••••"," −−•••"," −−−••"," −−−−•"," •−••−•"," •−••−•"," •−−•−•"," −••••−"," −•−−•"," −•−−•−"," −−−•••"," −•••−","−•−•−−"," •−•−•"," ••−−••"," •−•−−•"," •−−•−•"," •−•••"," −••−•"]
  var x = 0;
  var output = ""
  output = " "+input+" "
  while(x<alph.length) {
  var a = " "+morse[x]
  var b = morse[x]
  if(output.includes(morse[x]+b+b+b+b+b)){output=output.split(morse[x]+b+b+b+b+b).join(morse[x]+a+a+a+a+a)}
  if(output.includes(morse[x]+b+b+b+b)){output=output.split(morse[x]+b+b+b+b).join(morse[x]+a+a+a+a)}
  if(output.includes(morse[x]+b+b+b)){output=output.split(morse[x]+b+b+b).join(morse[x]+a+a+a)}
  if(output.includes(morse[x]+b+b)){output=output.split(morse[x]+b+b).join(morse[x]+a+a)}
  if(output.includes(morse[x]+b)){output=output.split(morse[x]+b).join(morse[x]+a)}
  output = output.split(morse[x]+" ").join(" "+alph[x]+" ")
  x++;
  }   
  output = output.split(" ").join("")
  output = output.split("_").join(" ")
  message.channel.send(output)  
  }else if(input.split(" ").reverse()[0]==="00"){
  input=input.toLowerCase()
  var special = ["\"","'",".",",","?","/","(",")","*","|","-","+","=","!","~","`","#","@","&",":"]
  var alph = ['a',"b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","_","0","1","2","3","4","5","6","7","8","9"];
  var morse = [" 01" ," 02" ," 03" ," 04" ," 05" ," 06" ," 07" ," 08" ," 09" ," 10" ," 11" ," 12" ," 13" ," 14" ," 15" ," 16" ," 17" ," 18" ," 19" ," 20" ," 21" ," 22" ," 23" ," 24" ," 25" ," 26" ," 00" ," 000" ," 001" ," 002" ," 003" ," 004" ," 005" ," 006" ," 007" ," 008" ," 009" ]
  var x = 0;
  var output = ""
  output = " "+input+" "
  var y = 0;
  while(y<special.length){
  output = output.split(special[y]).join(" "+special[y])
  y++
  }
  while(x<alph.length) {
  if(output.includes(morse[x]+morse[x])){output=output.split(morse[x]+morse[x]).join(morse[x]+" "+morse[x])}
  output = output.split(morse[x]+" ").join(" "+alph[x]+" ")
  x++;
  }   
  output = output.split(" ").join("")
  output = output.split("_").join(" ")
  message.channel.send(output.split("").slice(0,output.length-1).join("")) 
  }else if(input.split("").reverse()[0]==="."){
  message.channel.send(rot13(input))
  }else{
  var ABC = {
  toAscii: function(bin) {
  return bin.replace(/\s*[01]{8}\s*/g, function(bin) {
  return String.fromCharCode(parseInt(bin, 2))
  })
  },
  toBinary: function(str, spaceSeparatedOctets) {
  return str.replace(/[\s\S]/g, function(str) {
  str = ABC.zeroPad(str.charCodeAt().toString(2));
  return !1 == spaceSeparatedOctets ? str : str + " "
  })
  },
  zeroPad: function(num) {
  return "00000000".slice(String(num).length) + num
  }
  };
  var bin = ABC.toAscii(message.content.replace("-decipher ",""))
  message.channel.send(bin.split("").slice(2,bin.length).join(""))
  } 
  }else
  
  if (command === 'kill' || command === 'oof') {
    if(arg1==="me"){
    arg1=message.author 
    }
    if(arg1 === undefined) {
    message.channel.send(message.author + kills[Math.floor(Math.random() * kills.length)]); 
    } else {
    message.channel.send(arg1 + kills[Math.floor(Math.random() * kills.length)]);
    }
    } else
  
  
  if (command === 'help' || command === 'info'||command === 'h'||command==='helpdocs') {
    var onPage = 0
    var helpdocs = [help1,help2,help3,help4,help5]
    var helpdocs2 = ["Useful","Fun","Games","Text","Misc."]
    const embed = new Discord.RichEmbed()
    .setAuthor("MapleBot Help")
    .setDescription("[MapleBot Invite](https://bit.ly/maplebot) or bit.ly/maplebot")
    .addField(helpdocs2[onPage],helpdocs[onPage])
    .setThumbnail(client.user.avatarURL)
    .setTimestamp(new Date())
    .setColor(color)
    .setFooter("Page "+(onPage+1)+"/5 | Created by "+client.users.get("409494455079403533").tag+" | Maplebot Classic")
    id = message.author.id
    message.channel.send(embed).then(message=>{
        message.react("⬅").then(()=>message.react("➡"))
        const filter = (reaction, user) => reaction.emoji.name === "⬅" && user.id == id||reaction.emoji.name === "➡" && user.id == id
        const collector = message.createReactionCollector(filter,{});
        helpTimeout = setTimeout(()=>{collector.stop()},120000)
        collector.on('collect', r => { 
                                      r.remove(client.users.get(id))
                                      clearTimeout(helpTimeout)
                                      helpTimeout = setTimeout(()=>{collector.stop()},30000)
                                      onPage = r.emoji.name == "⬅" ? onPage-1 : onPage+1
                                      onPage = onPage== -1 ? 4 : onPage
                                      onPage = onPage== 5 ? 0 : onPage
                                      var embed = new Discord.RichEmbed().setAuthor("MapleBot Help").setDescription("[MapleBot Invite](https://bit.ly/maplebot) or bit.ly/maplebot").addField(helpdocs2[onPage],helpdocs[onPage]).setThumbnail(client.user.avatarURL).setTimestamp(new Date()).setColor(color).setFooter("Page "+(onPage+1)+"/5 | Created by "+client.users.get("409494455079403533").tag+" | Maplebot V4.2.1")
                                      message.edit(embed)
                                     });
        collector.on('end', collected => {message.clearReactions()});

        })
    }else
     
    if(command=='reload'){
      message.react('✅')
      message.channel.send()
      throw new Error('yeet')
    }else
      
    if(command==='servers'){
    message.channel.send(client.guilds.map(g=>g.name).join('\n'))
    }else
      
    if(command==='roll'){
     var sides = args[1]
     var dice = args[0]
     if(dice.split("")[0]=='d'){
      sides=Number(dice.replace("d",""))
      dice=args[1]
     }
      if(dice==undefined){dice=1}
      if(sides==undefined){sides=6}
      var i = 0
      var output = 0
      while(i<Number(dice)){
      output+=Math.floor(Math.random()*Number(sides)+1)
        i++
      } 
      if(output==NaN)return
      message.channel.send(new Discord.RichEmbed().setTitle("[**"+output+"**]").setColor(0x39393e).setAuthor(dice+"x D"+sides))
     }

     if (command === 'pfp') {
     var member = message.mentions.users.first()
     if(member===undefined){
      member = message.author.avatarURL 
     } else {
     member = member.avatarURL
     }
     const embed = new Discord.RichEmbed()
     .setDescription("[avatar url]("+member+")")
     .setImage(member)
     message.channel.send(embed)
     } else
     
     if(command==='8ball') {
     message.channel.send(ball[Math.floor(Math.random()*ball.length)])
     }else
       
  if(command==="ship"){
    function createShip(a,b){
      var possibleShip = [a.split("").slice(0,Math.round(a.length/2)).join("")+b.split("").slice(Math.round(b.length/2,b.length)).join(""),
                         b.split("").slice(0,Math.round(b.length/2)).join("")+a.split("").slice(Math.round(a.length/2,a.length)).join("")
                         ]
      return possibleShip[Math.floor(Math.random()*possibleShip.length)]
    }
    var randomperc = nyoom[Math.floor(Math.random()*nyoom.length)]
    var oof4 = (Math.floor(Math.random()*shipometer2.length))
    arg1 = arg1.toLowerCase().split("_").join(" ")
    arg2 = arg2.toLowerCase().split("_").join(" ")
    var ship = createShip(arg1,arg2)
    if(shipometer2[oof4]==="<:redleft:529734821526896641><:redfull:529734821690474496><:redfull:529734821690474496><:redfull:529734821690474496><:redright:529734822101385246>") {randomperc=" 100%"}
    if(shipometer2[oof4]==="<:blueleft:529734821824692224><:bluefull:529734821707120660><:bluefull:529734821707120660><:bluefull:529734821707120660><:blueright:529734821547737108>") {randomperc=" -100%"}
    var output = arg1+" + "+arg2+" = **"+ship+"**\n\n"+shipometer2[oof4]+randomperc+" Match"
    const embed = new Discord.RichEmbed()
    .setColor(color)
    .setDescription(output)
    message.channel.send(embed)
  }else
  
  if(command==="reverse"){
    var removePrefix = message.content.replace("-reverse ","")
    var splitString = removePrefix.split(""); 
    var reverseArray = splitString.reverse();
    var joinArray = reverseArray.join("");
    message.channel.send(joinArray)
  }else
  
  if(command==="replace"){
const phrase = message.content.replace("-replace "+arg1+" "+arg2+" ","")
const stripped = phrase.split(arg1).join(arg2)
message.channel.send(stripped)
  }else
  
  if(command==="scramble"){
   function randomsort(a, b) { 
	return Math.random()>.5 ? -1 : 1;
}
var arrStr = message.content.replace("-scramble ","");
var randomStr = arrStr.split('').sort(randomsort); 
message.channel.send(randomStr.join('')); //"nigorts ruy"  
  }else
  
  if(command==="randomsort"){
  function randomsort(a, b) { 
	return Math.random()>.5 ? -1 : 1;
  }
  var arrStr = message.content.replace("-randomsort ","");
  var randomStr = arrStr.split(',').sort(randomsort); 
  message.channel.send(randomStr.join(',')); //"nigorts ruy"  
  }else
  
//   if(command=='dmflood'){
//    var mention = message.mentions.members.first()
//     var i =0
//     if(Number(args[0])>50) args[0] = 50
//     while(i<Number(args[0])){
//       mention.send(message.content.split(args[0]).join(""))
//       i++
//     }
//     message.channel.send(mention.displayName+"'s dms are getting destroyed")
//   }else
  
  if(command==='suck'){
   message.channel.send("uwu *succs "+message.mentions.members.first().nickname+"*") 
  }else

  if(command==='sort'){
   var sort = message.content.replace("-sort ","").split(",").sort().join(",")
   message.channel.send(sort)
  }
  
  
 
  


       
    
  
   
})

  


client.login(process.env.TOKEN);

const http = require('http');
  
const server = http.createServer((req, res) => {
  res.end("Hello! This is the webserver for the discord bot on "+process.env.PROJECT_DOMAIN);
}).listen(3000);


setInterval(() => {
  http.get(`http://${process.env.PROJECT_DOMAIN}.glitch.me/`);
  console.log("WebServer is online!");

}, 270000);

      